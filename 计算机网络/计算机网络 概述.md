# 计算机网络 概述

[TOC]



## 什么是Internet

网络是由若干**节点（node）**和连接这些节点的**边（edge）**构成，表示诸多对象及其之间的相互联系（边与节点的拓扑关系）。

在计算机网络中，节点是主机、主机上运行的程序、路由器、交换机等，边是通信链路。

Internet是采用`TCP/IP`协议栈的计算机网络。从具体构成角度看，Internet由协议、网络设备（主机终端、交换机等）、通信链路组成。而从服务角度看，Internet是由

- 使用通信基础设施进行通信的分布式应用
- 通信基础设施为app提供编程接口（通信服务）



> Internet表示因特网，是当前世界上最大的、开放的、由众多网络相互连接而成的特定计算机网络，它采用`TCP/IP`协议簇作为通信的规则。而internet表示互联网，泛指多个计算机网络互连而组成的网络，在这些网络之间的协议簇可以是任意的。intranet是与Internet采用相同技术栈的网络，但是不对外开放，一般用于企业内部网。



**协议**定义了在两个或多个通信实体之间交换的**报文格式（语法）**和**次序（语义）**，以及在报文传输等其他事件方面所采取的**动作**。



面向连接与有连接之间的区别：面向连接是指通信状态在端系统中维护，而网络不知道这些状态。有连接是指这些通信状态在网络中维护。

## 网络边缘

网络边缘是由端系统（主机）硬件以及在其上面的软件程序组成。应用有两种通信模式：

- 客户/服务端（C/S）模式，客户端主动向服务器发送请求。这种模式可扩展性比较差（随着负荷到达阈值，性能急剧下降）。
- 对等（Peer-Peer）模式，每个端系统即是客户端也是服务端。



网络基础设施向网络边缘提供两种类型的服务：TCP、UDP。

## 网络核心

数据可以通过两种方式在网络中传输：

- **电路交换（线路交换）**
- **分组交换**

==电路交换（预约服务）vs 分组交换（按需服务）==

电路交换在通信之前使用信令系统为通信双方预留一定的通信资源，这个过程称为**呼叫（call）**。通信资源被双方独享，可以保证通信质量。但是若呼叫后无数据发送，那么资源会被浪费，从而导致整个系统的利用率低。

在电路交换中，采用以下资源复用技术：

- **频分（Frequency Division Multiplexing）**
- **时分（Time Division Multiplexing）**
- **波分（Wave Division Multiplexing）**，本质上就是频分，不过用于频率较高的带宽中

> 带宽

分组交换是以分组为单位**存储-转发**。

为什么要存储-转发：可以进行错误检查，若出错可直接抛弃整个分组，而无需在接收端传输层中进行处理。

分组交换网络有两种类型：

- 数据报网络
- 虚电路网络



计算机网络通信具有突发性的特点，电路交换在这种情景下中不适用，下面用一个例子来说明这一点，严格的证明需要排队论知识。





## 接入网和物理媒体

接入网解决的是如何将网络边缘的端系统和网络核心的路由器连接的问题。

## Internet结构和ISP

**内容提供商网络（Internet Content Providers）**：由于IXP成本高，且服务质量得不到保障（例如跨洋通信）。一些互联网大厂（Google）在全世界各地部署数据中心（DC）。然后租用或铺设光缆，将这些数据中心连接起来，构成一个分布式服务器。最后再与较近的IXP相连，为终端用户提供服务。如果用户所请求的服务在本地服务器不存在，那么通过自己的专用网络向别的服务器请求该服务，而不走一级ISP的线路。

## 分组延时、丢失和吞吐量

分组延时的四种类型：处理延时、排队延时、传输延时、传播延时。

节点延时：$d_{nodal} = d_{proc} + d_{queue} + d_{trans} + d_{prop}$



流量强度：$I = \frac{La}{R}$，其中`L`是分组长度，`a`是分组个数到达的平均速率，`R`是链路宽带。流量强度与平均排队延时的关系：

==设计系统时流量强度不能大于1==

## 协议层次及服务模型

如何组织和实现复杂的网络功能（路由、物理信号处理、域名解析、电子支付等）：**模块化**。

一般来说模块化有两种形式：**扁平化**与**分层**。扁平化的模块之间可以相互调用。而分层的模块之间只能调用相邻层次的模块，而不建议跨层调用。

计算机网络系统采用分层方式来设计：

==IP Over Everything==



**数据单元（Data Unit）**

PDU在不同层次的称谓：

- 应用层：**报文（message）**
- 传输层：**报文段（segment）**
	- **TCP段**
	- **UDP数据报**
- 网络层：**分组（packet）**
	- 以无连接的方式：**数据报 datagram**
- 数据链路层：**帧（frame）**
- 物理层：**位（bit）**